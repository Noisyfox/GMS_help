<!doctype html><html><!-- InstanceBegin template="/Templates/GMS_helppage.dwt" codeOutsideHTMLIsLocked="false" -->

<head>
    <!-- InstanceBeginEditable name="doctitle" -->
<title>mp_grid_add_cell</title>
<!-- InstanceEndEditable -->
    <meta http-equiv="X-UA-Compatible" content="IE=9" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="viewport" content="width=device-width initial-scale=1.0 maximum-scale=2.0 user-scalable=yes" />
    <link rel="stylesheet" href="../../../src/css/style.css" type="text/css" media="screen" title="style" charset="utf-8" />
    <link type="text/css" rel="stylesheet" href="../../../src/css/jquery.mmenu.all.css" />
    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
      <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->
    <link rel="icon" type="image/png" href="../../../favicon.png">
    <!-- InstanceParam name="OptionalRegion_footer" type="boolean" value="false" -->
</head>

<body bgcolor="#FFFFFF">
    <div id="page">
        <div id="header" class="mm-fixed-top">
            <a href="#menu_left" class="menu_left" title="点击此按钮打开左侧目录菜单，右边的按钮则打开右侧菜单。"></a>GameMaker:Studio帮助手册
            <a href="#menu_right" class="friends right"></a>
        </div>
        <div id="content">
            <!-- InstanceBeginEditable name="EditRegion_content" -->
<h1>mp_grid_add_cell</h1>
  
<h2>Marks the indicated cell as being forbidden to the path-finding functions.</h2>

  
<h3>Syntax :</h3>
<p class="code">mp_grid_add_cell(id, h, v);</p>
  
<p>
<br>
</p>
  
<div class="param">
<table>
	<tr><th>Argument</th><th>Description</th></tr>

	<tr><td>id</td>
	<td>Index of the mp_grid that is to be used</td></tr>
	
	<tr class="alt"><td>h</td>
	<td>Horizontal position of the cell in the grid</td></tr>
	
	<tr><td>v</td>
	<td>Vertical position of the cell in the grid</td></tr>
	
</table>
</div>

<p>
<br>
</p>
  
<p>
<b>Returns:</b> N/A</p>  
<p>

<p>
<br>
</p>

<h3>Description</h3>
<p>
With this function we can mark individual cells within the mp_grid as being "forbidden" meaning that the path finding functions will not ever cross them. Now, normally you work in x/y <i>room</i> coordinates, 
and not in mp_grid <i>cell</i> coordinates. So lets consider the following image which shows how the two can correlate :
<br>
<br>

<img class="center" src="mp_grid_add_cell_image.png"></img>

<p>
As you can see the mp_grid is numbered as a series of cells (starting at 0,0 in the upper left corner), and when you place this grid over the room there is a direct correlation between the room coordinates (which also 
start at 0,0 in the top left) and the cells within the grid. In the image you can see that an instance at the position 260,130 falls on the grid cell 8,4. You can calculate mathematically the exact cell that a position lands 
on easily by either dividing the number by the grid resolution and then rounding down <i>or</i> (if you are using power of 2 grid resolutions like 8, 16, 32 etc...) you can use the bitwise operators. It should be noted 
that the bitwise operation is faster. The example below shows both methods.
<br>
<br>

<p>
<br>
</p>

<h3>Example :</h3>
<p class="code">
with (obj_Wall)<br>
&nbsp;&nbsp;&nbsp;{<br>
&nbsp;&nbsp;&nbsp;mp_grid_add_cell(grid, floor(x / 32), floor(y / 32));<br>
&nbsp;&nbsp;&nbsp;}<br>
with (obj_Door)<br>
&nbsp;&nbsp;&nbsp;{<br>
&nbsp;&nbsp;&nbsp;mp_grid_add_cell(grid, x>>5, y>>5);<br>
&nbsp;&nbsp;&nbsp;}<br>
</p>
<p>
The above code will make all "obj_Wall" and all obj_Door add their equivalent cell positions into the mp_grid indexed in the variable "grid". In the first part of the example, this is done by taking the x/y coordinates of the 
object and dividing them by the resolution of the grid (using <tt>floor</tt> to keep the values as integers), and in the second part (since the grid resolution is a power of 2) it is done by bit-shifting the x,y coordinates 5 
places to the right.
</p>
  
<p>
<br>
</p>
<p>

<div class="clear">
	<div style="float:left">
		Back : <a href="index.html">Motion Planning</a>
	</div>
	<div style="float:right">
		Next : <a href="mp_grid_add_instances.html">mp_grid_add_instances</a>
	</div>
</div>
</p>

<h5>&copy; Copyright YoYo Games Ltd. 2013 All Rights Reserved</h5>
  <!-- InstanceEndEditable -->
        </div>
        
        <div id="page_popup">
            <div class="popup ">
                <div>
                    <a href="#page" class="close">x</a>
                    <div>
                        <h4>喵~</h4>
                        <p>欢迎，这里是404号猫国皇室会所~~</p>
                        <p>因为找不到其它的地方，你来到了这里。</p>
                    </div>

                </div>

            </div>
        </div>
        <div id="page_fullscreen">

            <div class="panel ">
                <div>
                    <a href="#page" class="close">x</a>
                    <div>
                        <h4>喵~</h4>
                        <p>欢迎，这里是404号猫国皇室会所~~</p>
                        <p>因为找不到其它的地方，你来到了这里。</p>
                    </div>

                </div>

            </div>
        </div>

        <div id="page_mmenu">
            <nav id="menu_left">
            </nav>
            <nav id="menu_right">
            </nav>
        </div>

        <!-- KEYWORDS
        pages
        -->
    </div>
    <script type="text/javascript" src="src/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="../../../src/js/jquery.min.js"></script>
    <script type="text/javascript" src="../../../src/js/jquery.mmenu.min.all_old.js"></script>
    <script type="text/javascript" src="../../../src/js/subpage.min.js"></script>

</body>

<!-- InstanceEnd --></html>

<!-- KEYWORDS
mp_grid_add_cell
-->
