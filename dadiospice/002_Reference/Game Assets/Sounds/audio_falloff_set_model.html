<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
	<head>
		<title>audio_falloff_set_model</title>
		<meta http-equiv="X-UA-Compatible" content="IE=9" />
		<link rel="stylesheet" href="../../../style.css" type="text/css" media="screen" title="style" charset="utf-8"/>
	<meta name="viewport" content="width=device-width initial-scale=1.0 maximum-scale=1.0 user-scalable=yes" /></head>
<body><!-- #BeginLibraryItem "/Library/mmenu_head.lbi" --><link type="text/css" rel="stylesheet" href="../../../../src/css/jquery.mmenu.css" />
<link type="text/css" rel="stylesheet" href="../../../../src/css/extensions/jquery.mmenu.themes.css" />
<link type="text/css" rel="stylesheet" href="../../../../src/css/jquery.mmenu.all.css" />
<style type="text/css">
@media all and (min-width: 900px) {
html, body {
height: 100%

}
#menu {
background: #eee
}
#page {
border-left: 1px solid #ccc
min-height: 100%
}
}
</style>

<!-- scripts links  -->

<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/2.0.2/jquery.min.js"></script>
<script type="text/javascript" src="../../../../src/js/jquery.mmenu.js"></script>
<script type="text/javascript" src="../../../../src/js/jquery.mmenu.min.all.js"></script>

<!-- main  -->

<script type="text/javascript">
	$(function() {
		$('nav#menu').mmenu({
			classes: 'mm-light'
				});
			});
</script>

<!-- for one page  -->

<script type="text/javascript">
	$(function() {
		var $menu = $('nav#menu'),
			$html = $('html, body');

		$menu.mmenu();
		$menu.find( 'li > a' ).on(
			'click',
			function()
			{
				var href = $(this).attr( 'href' );

				//	if the clicked link is linked to an anchor, scroll the page to that anchor 
				if ( href.slice( 0, 1 ) == '#' )
				{
					$menu.one(
						'closed.mm',
						function()
						{
							setTimeout(
								function()
								{
									$html.animate({
										scrollTop: $( href ).offset().top
									});	
								}, 10
							);	
						}
					);						
				}
			}
		);
	});
</script>
	
<!-- for the tips  -->
	
<script type="text/javascript">
			$(function() {
				var options = {
					classes			: 'mm-light',
					modal			: true
				};
				
				options.position = 'left';
				options.zposition = 'next';
				$('#tooltip-1').mmenu( options );
				
				options.position = 'right';
				options.zposition = 'next';
				$('#tooltip-2').mmenu( options );
				
				options.position = 'bottom';
				options.zposition = 'front';
				$('#popup-1').mmenu( options );

				options.position = 'top';
				options.zposition = 'front';
				$('#popup-2').mmenu( options );
			});
</script>

<!-- the page header part  -->

<div id="page">
			<div id="header" >
				<a href="#menu"></a>
				&#x70B9;&#x51FB;&#x5DE6;&#x8FB9;&#x6309;&#x952E;&#x6253;&#x5F00;&#x5BFC;&#x822A;&#x83DC;&#x5355;
			</div>
			<div id="content" >
			
<!-- for update files -->


<!-- #EndLibraryItem --><h1>audio_falloff_set_model</h1>

<h2>Sets the model on which all falloff values will be calculated.</h2>

<h3>Syntax :</h3>
<p class="code">audio_falloff_set_model(model);</p>

<p>
<br>
</p>

<div class="param">
<table>
	<tr><th>Argument</th><th>Description</th></tr>
	
	<tr><td>model</td>
	<td>The <b>constant</b> used to set the falloff model.</td></tr>

</table>
</div>
<p>
<br>
</p>

<p>
<b>Returns : </b>N/A
</p>

 <p>
<br>
</p>

<h3>Description</h3>
<p>
To add more versatility to the audio engine, <i>GameMaker:Studio</i> permits you to select the falloff model that suits your game. This model will be used for <b>all</b> the audio functions in the game or app, 
and so you should make sure that the model you choose is the correct one, as each one will affect how the listener perceives the sounds you play through emitters or with the function 
<a href="audio_play_sound_at.html"><a><tt>audio_play_sound_at</tt></a>.
<br>
<br>

When setting falloff in your game with the appropriate functions there are three arguments that you will need to set, and each one is appropriate to a specific, model and will affect the way the final sound is "heard" 
by the player depending on the distance that the listener is from the source. The three arguments are:
<blockquote>
	<ul>
		<li><b>reference distance</b> - this is the distance from the listener the distance under which the volume for the sound playing would normally drop by half before being influenced by rolloff factor or 
		the specified maximum distance.</li><br>
		
		<li><b>maximum distance</b> - this sets the distance where there will no longer be any attenuation of the source sound. This can be the point at which the sound is no longer heard <i>or</i> the point at 
		which the sound volume no longer decreases below the minimum threshold defined by the model chosen.</li><br>
		
		<li><b>falloff factor</b> - The falloff factor is used in distance attenuation based on the inverse distance model and sets the final minimum threshold for a sound with falloff.</li>
	</ul>
</blockquote>

<p>
The falloff models that are affected by these arguments are represented in <i>GameMaker:Studio</i> by the following constants (the table shows the exact calculations used too):
<div class="compat">
	<table>
		<tr><th>Constant</th><th>Function</th></tr>
		
		<tr><td>audio_falloff_exponent_distance</td>								<td><br>gain = (listener_distance / reference_distance) ^ (-falloff_factor)<br><br></td></tr>
		<tr class="alt"><td>audio_falloff_exponent_distance_clamped</td>	<td><br>distance = clamp(listener_distance, reference_distance, maximum_distance)<br>
																													gain = (distance / reference_distance) ^ (-falloff_factor)<br><br></td></tr>
		<tr><td>audio_falloff_inverse_distance</td>									<td><br>gain = reference_distance / (reference_distance + falloff_factor * (listener_distance ?reference_distance))<br><br></td></tr>
		<tr class="alt"><td>audio_falloff_inverse_distance_clamped</td>		<td><br>distance = clamp(listener_distance, reference_distance, maximum_distance)<br>
																													gain = reference_distance / (reference_distance + falloff_factor * (distance ?reference_distance))<br><br></td></tr>
		<tr><td>audio_falloff_linear_distance</td>										<td><br>distance = min(distance, maximum_distance)<br>
																													gain = (1 ?falloff_factor * (distance ?reference_distance) / (maximum_distance ?reference_distance))<br><br></td></tr>
		<tr class="alt"><td>audio_falloff_linear_distance_clamped</td>		<td><br>distance = clamp(listener_distance, reference_distance, maximum_distance)<br>
																													gain = (1 ?falloff_factor * (distance ?reference_distance) / (maximum_distance ?reference_distance))<br><br></td></tr>
		<tr><td>audio_falloff_none</td>													<td><br>gain = 1<br><br></td></tr>

	</table>
</div>

<p>
<br>
<br>
The following graphs are visual representations of how the above constants work and affect the sound being played:
<br>
<br>

<img class="center" src="Distance_Models.png"></img>

<br>
<br>

<p>
<br>
</p>

<h3>Example :</h3>
<p class="code">
audio_falloff_set_model(audio_falloff_exponent_distance_clamped);<br>
audio_play_sound_at(snd_Waterfall, x, y, 0, 100, 300, 1, true, 1);<br>
</p>
<p>
The above code sets the falloff model and then plays the sound indexed in the variable "snd_Waterfall", which will be looped at it's room position, with a fall-off reference of 100, a falloff distance of 300, 
a falloff factor of 1 and a low priority.
</p>

<p>
<br>
</p>
<p>

<div class="clear">
	<div style="float:left">
		Back : <a href="index.html">Sound</a>
	</div>
	<div style="float:right">
		Next : <a href="audio_music_gain.html">audio_music_gain</a>
	</div>
</div>
</p>

<h5>&copy; Copyright YoYo Games Ltd. 2013 All Rights Reserved</h5><!-- #BeginLibraryItem "/Library/mmenu_body_down.lbi" -->
</div>
<div id="footer">
				Fixed footer :-)
</div>

			<nav id="menu">
				<ul>
					<li ><a href="../../../../index.html">GameMaker:Studio 手册首页</a>
						<ul>
							<li><a href="#content">Introduction</a></li>
							<li><a href="#first">First section</a></li>
							<li><a href="#second">Second section</a></li>
							<li><a href="#third">Third section</a></li>
						</ul>
					</li>
					<li >
						<a href="../../../000_Using GameMaker/index.html">GameMaker:Studio 使用</a>
						<ul>
							<li><a href="#">First sub-item</a></li>
							<li>
								<a href="#">Second sub-item</a>
								<ul>
									<li><a href="#">First sub-sub-item</a></li>
									<li><a href="#">Second sub-sub-item</a></li>
									<li><a href="#">Third sub-sub-item</a></li>
								</ul>
							</li>
							<li><a href="#">Third sub-item</a></li>
						</ul>
					</li>
					<li ><a href="../../../001_Advanced Use/index.html">Advanced Use 高级使用</a></li>
					<li ><a href="../../index.html">Reference GML参考手册</a></li>
					<li ><a href="#">Examples and Experience 实例教程及心得</a></li>
					<li ><a href="#">Experimental project 实验项目</a></li>
					<li ><a href="#">Setting 应用设置</a></li>					
				</ul>
			</nav>
</div>
<!-- 注意1 --><!-- #EndLibraryItem --></body>
</html>

<!-- KEYWORDS
audio_falloff_set_model
audio_falloff_exponent_distance
audio_falloff_exponent_distance_clamped
audio_falloff_inverse_distance
audio_falloff_inverse_distance_clamped
audio_falloff_linear_distance
audio_falloff_linear_distance_clamped
audio_falloff_none
falloff models
-->
