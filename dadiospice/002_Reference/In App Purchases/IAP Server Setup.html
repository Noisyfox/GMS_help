<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
	<head>
		<title>IAP Server Setup</title>
		<meta http-equiv="X-UA-Compatible" content="IE=9" />
		<link rel="stylesheet" href="../../style.css" type="text/css" media="screen" title="style" charset="utf-8"/>
	<meta name="viewport" content="width=device-width initial-scale=1.0 maximum-scale=1.0 user-scalable=yes" /></head>
<body><!-- #BeginLibraryItem "/Library/mmenu_head.lbi" --><link type="text/css" rel="stylesheet" href="../../../src/css/jquery.mmenu.css" />
<link type="text/css" rel="stylesheet" href="../../../src/css/extensions/jquery.mmenu.themes.css" />
<link type="text/css" rel="stylesheet" href="../../../src/css/jquery.mmenu.all.css" />
<style type="text/css">
@media all and (min-width: 900px) {
html, body {
height: 100%

}
#menu {
background: #eee
}
#page {
border-left: 1px solid #ccc
min-height: 100%
}
}
</style>

<!-- scripts links  -->

<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/2.0.2/jquery.min.js"></script>
<script type="text/javascript" src="../../../src/js/jquery.mmenu.js"></script>
<script type="text/javascript" src="../../../src/js/jquery.mmenu.min.all.js"></script>

<!-- main  -->

<script type="text/javascript">
	$(function() {
		$('nav#menu').mmenu({
			classes: 'mm-light'
				});
			});
</script>

<!-- for one page  -->

<script type="text/javascript">
	$(function() {
		var $menu = $('nav#menu'),
			$html = $('html, body');

		$menu.mmenu();
		$menu.find( 'li > a' ).on(
			'click',
			function()
			{
				var href = $(this).attr( 'href' );

				//	if the clicked link is linked to an anchor, scroll the page to that anchor 
				if ( href.slice( 0, 1 ) == '#' )
				{
					$menu.one(
						'closed.mm',
						function()
						{
							setTimeout(
								function()
								{
									$html.animate({
										scrollTop: $( href ).offset().top
									});	
								}, 10
							);	
						}
					);						
				}
			}
		);
	});
</script>
	
<!-- for the tips  -->
	
<script type="text/javascript">
			$(function() {
				var options = {
					classes			: 'mm-light',
					modal			: true
				};
				
				options.position = 'left';
				options.zposition = 'next';
				$('#tooltip-1').mmenu( options );
				
				options.position = 'right';
				options.zposition = 'next';
				$('#tooltip-2').mmenu( options );
				
				options.position = 'bottom';
				options.zposition = 'front';
				$('#popup-1').mmenu( options );

				options.position = 'top';
				options.zposition = 'front';
				$('#popup-2').mmenu( options );
			});
</script>

<!-- the page header part  -->

<div id="page">
			<div id="header" >
				<a href="#menu"></a>
				&#x70B9;&#x51FB;&#x5DE6;&#x8FB9;&#x6309;&#x952E;&#x6253;&#x5F00;&#x5BFC;&#x822A;&#x83DC;&#x5355;
			</div>
			<div id="content" >
			
<!-- for update files -->


<!-- #EndLibraryItem --><h1>IAP Server Setup</h1>

<h2>This section deals with setting up your own in app purchases server.</h2>

<p>
If you wish to make use of a proprietary web server for retrieving available products (allowing you to dynamically update the set of products available for a title without the need to update your title) and/or 
for verifying Apple Store receipts then you should follow the following instrauctions for setting the whole system up.
<br>
<br>

First, when setting up your own server, you should be aware that <i>GameMaker:Studio</i> will require that it honours the following API calls:
<blockquote>
	<ul>
		<li>{URL}/products/purchases?product={yourpackagename}<br><br>
		<li>{URL}/admin/verify?receipt={applestorereceipt}
	</ul>
</blockquote>

<p>
Once that is done you will need to add the necessary information too, so that when the API call of ?b>products/purchases?product=</b>?is queried by the <i>GameMaker:Studio</i> runner the returned 
data is correctly formated. This means that the data must be provided in the form of JSON with the following format (using example values):
<br>
<br>
<p class="code">
[{<br>
&nbsp;&nbsp;&nbsp;price":"0.69",<br>
&nbsp;&nbsp;&nbsp;"name":"Extra Levels Pack 1",<br>
&nbsp;&nbsp;&nbsp;"product_id":3,<br>
&nbsp;&nbsp;&nbsp;"url":"http://MacSweeneyServer.com/ExtraLevels1.zip",<br>
&nbsp;&nbsp;&nbsp;"description":"Levels Pack 1",<br>
&nbsp;&nbsp;&nbsp;"purchase_id":"com.MacSweeneyGames.droid.cc.pack1",<br>
&nbsp;&nbsp;&nbsp;"path":"ExtraLevels/1"<br>
},<br>
{<br>
&nbsp;&nbsp;&nbsp;"price":"1.00",<br>
&nbsp;&nbsp;&nbsp;"name":Extra Levels Pack 2",<br>
&nbsp;&nbsp;&nbsp;"product_id":3,<br>
&nbsp;&nbsp;&nbsp;"url":"http://MacSweeneyServer.com/ExtraLevels2.zip",<br>
&nbsp;&nbsp;&nbsp;"description":"Levels Pack 2"<br>
&nbsp;&nbsp;&nbsp;"purchase_id":"com.MacSweeneyGames.droid.cc.pack2",<br>
&nbsp;&nbsp;&nbsp;"path":"ExtraLevels/2",<br>
}]
</p>

<p>
<br>
Please note that the values for the title? description?and price?fields are only <i>placeholders</i> for iOS titles and the actual values are filled in from the settings on the Apple Store which also 
correctly adjusts the price according to region. On Android titles no such facility exists thus the values should be provided accurately.
<br>
<br>

One last piece of JSON that must also be included is for when the <i>GameMaker:Studio</i> runner queries the API call of ?b>admin/verify?receipt=</b>? The returned data must be provided in the form 
of JSON with the following format:
<br>
<br>
<p class="code">
[{<br>
status?true?br>
}]
</p>

<p>
<br>
Finally, to use in-app purchases with your proprietary developer server you will need to configure your title in the <a href="../../001_Advanced%20Use/Global%20game%20settings/In%20App%20Purchases%20Tab.html">Global Game 
Settings</a> as in the following image:

<img class="center" src="serverURL.png"></img>
<br>
<br>

<p>
<br>
</p>
<p>

<div class="clear">
	<div style="float:left">
		Back : <a href="index.html">In App Purchases</a>
	</div>
	<div style="float:right">
		Next : <a href="IAP%20Example.html">IAP Example</a>
	</div>
</div>
</p>

<h5>&copy; Copyright YoYo Games Ltd. 2013 All Rights Reserved</h5><!-- #BeginLibraryItem "/Library/mmenu_body_down.lbi" -->
</div>
<div id="footer">
				Fixed footer :-)
</div>

			<nav id="menu">
				<ul>
					<li ><a href="../../../index.html">GameMaker:Studio 手册首页</a>
						<ul>
							<li><a href="#content">Introduction</a></li>
							<li><a href="#first">First section</a></li>
							<li><a href="#second">Second section</a></li>
							<li><a href="#third">Third section</a></li>
						</ul>
					</li>
					<li >
						<a href="../../000_Using GameMaker/index.html">GameMaker:Studio 使用</a>
						<ul>
							<li><a href="#">First sub-item</a></li>
							<li>
								<a href="#">Second sub-item</a>
								<ul>
									<li><a href="#">First sub-sub-item</a></li>
									<li><a href="#">Second sub-sub-item</a></li>
									<li><a href="#">Third sub-sub-item</a></li>
								</ul>
							</li>
							<li><a href="#">Third sub-item</a></li>
						</ul>
					</li>
					<li ><a href="../../001_Advanced Use/index.html">Advanced Use 高级使用</a></li>
					<li ><a href="../index.html">Reference GML参考手册</a></li>
					<li ><a href="#">Examples and Experience 实例教程及心得</a></li>
					<li ><a href="#">Experimental project 实验项目</a></li>
					<li ><a href="#">Setting 应用设置</a></li>					
				</ul>
			</nav>
</div>
<!-- 注意1 --><!-- #EndLibraryItem --></body>
</html>

<!--KEYWORDS
proprietary server
iap server settings
-->