<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
	<title>mp_grid_path</title>
	<meta http-equiv="X-UA-Compatible" content="IE=9" />
	<link rel="stylesheet" href="../../../style.css" type="text/css" media="screen" title="style" charset="utf-8"/>
<meta name="viewport" content="width=device-width initial-scale=1.0 maximum-scale=1.0 user-scalable=yes" /></head>
<body><!-- #BeginLibraryItem "/Library/mmenu_head.lbi" -->
<link type="text/css" rel="stylesheet" href="../../../../src/css/jquery.mmenu.all.css" />
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/2.0.2/jquery.min.js"></script>
<script type="text/javascript" src="../../../../src/js/jquery.mmenu.min.all_old.js"></script>

<style type="text/css">
@media all and (min-width: 900px) {
html, body {
height: 100%

}
#menu {
background: #eee
}
#page {
border-left: 1px solid #ccc
min-height: 100%
}
}
</style>

<!-- scripts links  -->



<!-- main  -->

<script type="text/javascript">
	$(function() {
		$('nav#menu').mmenu({
			classes: 'mm-light'
				});
			});
</script>

<!-- for one page  -->

<script type="text/javascript">
	$(function() {
		var $menu = $('nav#menu'),
			$html = $('html, body');

		$menu.mmenu();
		$menu.find( 'li > a' ).on(
			'click',
			function()
			{
				var href = $(this).attr( 'href' );

				//	if the clicked link is linked to an anchor, scroll the page to that anchor 
				if ( href.slice( 0, 1 ) == '#' )
				{
					$menu.one(
						'closed.mm',
						function()
						{
							setTimeout(
								function()
								{
									$html.animate({
										scrollTop: $( href ).offset().top
									});	
								}, 10
							);	
						}
					);						
				}
			}
		);
	});
</script>
	
<!-- for the tips  -->
	
<script type="text/javascript">
			$(function() {
				var options = {
					classes			: 'mm-light',
					modal			: true
				};
				
				options.position = 'left';
				options.zposition = 'next';
				$('#tooltip-1').mmenu( options );
				
				options.position = 'right';
				options.zposition = 'next';
				$('#tooltip-2').mmenu( options );
				
				options.position = 'bottom';
				options.zposition = 'front';
				$('#popup-1').mmenu( options );

				options.position = 'top';
				options.zposition = 'front';
				$('#popup-2').mmenu( options );
			});
</script>

<!-- the page header part  -->

<script type="text/javascript">
   $(function() {
      $("my-menu").mmenu({
         labels: {
            fixed: true
         }
      });
   });
</script>


<script type="text/javascript">
   $(function() {
      $("my-menu").mmenu({
         searchfield: true
      });
   });
</script>

<div id="page">
			<div id="header" >
				<a href="#menu"></a>
				&#x70B9;&#x51FB;&#x5DE6;&#x8FB9;&#x6309;&#x952E;&#x6253;&#x5F00;&#x5BFC;&#x822A;&#x83DC;&#x5355;
			</div>
			<div id="content" >
			
<!-- for update files -->


<!-- #EndLibraryItem --><h1>mp_grid_path</h1>
  
<h2>This function computes a path through the given mp_grid.</h2>
  
<h3>Syntax :</h3>
<p class="code">mp_grid_path(id, path, xstart, ystart, xgoal, ygoal, allowdiag);</p>
  
<p>
<br>
</p>

<div class="param">
<table>
	<tr><th>Argument</th><th>Description</th></tr>

	<tr><td>id</td>
	<td>Index of the mp_grid that is to be used</td></tr>

	<tr class="alt"><td>path</td>
	<td>index of the path that is to be used by the function</td></tr>
	
	<tr><td>x start</td>
	<td>Starting x coordinate of the new path</td></tr>
	
	<tr class="alt"><td>y start</td>
	<td>Starting y coordinate of the new path</td></tr>

	<tr><td>xgoal</td>
	<td>Finishing x coordinate of the new path</td></tr>	
	
	<tr class="alt"><td>ygoal</td>
	<td>Finishing y coordinate of the new path</td></tr>
	
	<tr><td>allowdiag</td>
	<td>Indicates whether diagonal moves are allowed instead of just horizontal or vertical</td></tr>
</table>
</div>

<p>
<br>
</p>
  
<p>
<b>Returns:</b> Boolean.</p>  
<p>

<p>
<br>
</p>

<h3>Description</h3>
<p>
<br>
With this function you can create a path that will navigate from a start point to a finish point using an <tt>mp_grid</tt> that you have previously defined, avoiding any obstacles that have already been added into the grid. 
The xstart and ystart arguments indicate the start of the path in grid coordinates, while xgoal,ygoal arguments indicate the destination. You can also select either horizontal/vertical movement only, or allow full diagonal 
movements by specifying true in the allowdiag argument. The function returns either true (it succeeded in finding a path) or false (it failed) as well as setting the chosen path. In the following image, you can see how this 
all works together :
<br>
<br>

<img class="center" src="mp_grid_path_image.png"></img>

<p>
As you can see, the "pipe" objects have been added into the grid, meaning that any path created has to go around them. There are two paths created in the image, one (green) has been made with diagonals allowed 
and the other (red) without. The difference between the two is pretty obvious with the green path appearing much more "elegant" and direct, but it all depends what use you are going to put them to which one you 
prefer. Note that the path is independent of the current instance - it is a path through the grid, not a path for a specific instance, even though a specific instance may have the variable that stores the path index. You 
may also need to debug these paths to see how they are made and interact within the game enviroment, in which case you should be using  the <a href="../../Drawing/Drawing%20Basic%20Forms/draw_path.html">
<tt>draw_path</tt></a> function. 
<br>
<br>

<i><b>NOTE : </b>The path must have been previously created (either in code with <a href="../../Paths/Changing%20Paths/path_add.html"><tt>path_add</tt></a> or as a resource) and will be replaced by 
the path generated by this function.</i>
<br>
<br>

<p>
<br>
</p>

<h3>Example :</h3>
<p class="code">
globalvar grid;<br>
grid = mp_grid_create(0, 0, room_width div 32, room_height div 32, 32, 32);<br>
mp_grid_add_instances(grid, obj_wall, false); <br>
with (obj_Enemy)<br>
&nbsp;&nbsp;&nbsp;{<br>
&nbsp;&nbsp;&nbsp;path = path_add();<br>
&nbsp;&nbsp;&nbsp;if mp_grid_path(grid, path, x, y, obj_Player.x, obj_Player.y, 1)<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;path_start(path, 0, 3, 0);<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>
&nbsp;&nbsp;&nbsp;}<br>
</p>
<p>
The above code creates a global variable "grid", then generates an mp_grid and assigns its index (id) to that variable for use in all further mp_grid function calls. It then adds all instances of "obj_Wall" into the grid before
getting all instances of "obj_Enemy" to create a path and then use <tt>mp_grid_path</tt> to calculate a rout from their position to the position of "obj_Player". If a route exists then the object starts itself along the path.
</p>
  
<p>
<br>
</p>
<p>

<div class="clear">
	<div style="float:left">
		Back : <a href="index.html">Motion Planning</a>
	</div>
	<div style="float:right">
		Next : <a href="mp_grid_add_cell.html">mp_grid_add_cell</a>
	</div>
</div>
</p>

<h5>&copy; Copyright YoYo Games Ltd. 2013 All Rights Reserved</h5><!-- #BeginLibraryItem "/Library/mmenu_body_down.lbi" -->
</div>
<div id="footer">
				Fixed footer :-)
</div>

			<nav id="menu">
				<ul>
					<li ><a href="../../../../index.html">GameMaker:Studio 手册首页</a>
						<ul>
							<li><a href="#content">Introduction</a></li>
							<li><a href="#first">First section</a></li>
							<li><a href="#second">Second section</a></li>
							<li><a href="#third">Third section</a></li>
						</ul>
					</li>
					<li >
						<a href="../../../000_Using GameMaker/index.html">GameMaker:Studio 使用</a>
						<ul>
							<li><a href="#">First sub-item</a></li>
							<li>
								<a href="#">Second sub-item</a>
								<ul>
									<li><a href="#">First sub-sub-item</a></li>
									<li><a href="#">Second sub-sub-item</a></li>
									<li><a href="#">Third sub-sub-item</a></li>
								</ul>
							</li>
							<li><a href="#">Third sub-item</a></li>
						</ul>
					</li>
					<li ><a href="../../../001_Advanced Use/index.html">Advanced Use 高级使用</a></li>
					<li ><a href="../../index.html">Reference GML参考手册</a></li>
					<li ><a href="#">Examples and Experience 实例教程及心得</a></li>
					<li ><a href="#">Experimental project 实验项目</a></li>
					<li ><a href="#">Setting 应用设置</a></li>					
				</ul>
			</nav>
</div>
<!-- 注意1 --><!-- #EndLibraryItem --></body>
</html>

<!-- KEYWORDS
mp_grid_path
-->
