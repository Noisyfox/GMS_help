<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
	<head>
		<title>Social Event</title>
		<meta http-equiv="X-UA-Compatible" content="IE=9" />
		<link rel="stylesheet" href="../../style.css" type="text/css" media="screen" title="style" charset="utf-8"/>
	<meta name="viewport" content="width=device-width initial-scale=1.0 maximum-scale=1.0 user-scalable=yes" /></head>
<body><!-- #BeginLibraryItem "/Library/mmenu_head.lbi" --><link type="text/css" rel="stylesheet" href="../../../src/css/jquery.mmenu.css" />
<link type="text/css" rel="stylesheet" href="../../../src/css/extensions/jquery.mmenu.themes.css" />
<link type="text/css" rel="stylesheet" href="../../../src/css/jquery.mmenu.all.css" />
<style type="text/css">
@media all and (min-width: 900px) {
html, body {
height: 100%

}
#menu {
background: #eee
}
#page {
border-left: 1px solid #ccc
min-height: 100%
}
}
</style>

<!-- scripts links  -->

<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/2.0.2/jquery.min.js"></script>
<script type="text/javascript" src="../../../src/js/jquery.mmenu.js"></script>
<script type="text/javascript" src="../../../src/js/jquery.mmenu.min.all.js"></script>

<!-- main  -->

<script type="text/javascript">
	$(function() {
		$('nav#menu').mmenu({
			classes: 'mm-light'
				});
			});
</script>

<!-- for one page  -->

<script type="text/javascript">
	$(function() {
		var $menu = $('nav#menu'),
			$html = $('html, body');

		$menu.mmenu();
		$menu.find( 'li > a' ).on(
			'click',
			function()
			{
				var href = $(this).attr( 'href' );

				//	if the clicked link is linked to an anchor, scroll the page to that anchor 
				if ( href.slice( 0, 1 ) == '#' )
				{
					$menu.one(
						'closed.mm',
						function()
						{
							setTimeout(
								function()
								{
									$html.animate({
										scrollTop: $( href ).offset().top
									});	
								}, 10
							);	
						}
					);						
				}
			}
		);
	});
</script>
	
<!-- for the tips  -->
	
<script type="text/javascript">
			$(function() {
				var options = {
					classes			: 'mm-light',
					modal			: true
				};
				
				options.position = 'left';
				options.zposition = 'next';
				$('#tooltip-1').mmenu( options );
				
				options.position = 'right';
				options.zposition = 'next';
				$('#tooltip-2').mmenu( options );
				
				options.position = 'bottom';
				options.zposition = 'front';
				$('#popup-1').mmenu( options );

				options.position = 'top';
				options.zposition = 'front';
				$('#popup-2').mmenu( options );
			});
</script>

<!-- the page header part  -->

<div id="page">
			<div id="header" >
				<a href="#menu"></a>
				&#x70B9;&#x51FB;&#x5DE6;&#x8FB9;&#x6309;&#x952E;&#x6253;&#x5F00;&#x5BFC;&#x822A;&#x83DC;&#x5355;
			</div>
			<div id="content" >
			
<!-- for update files -->


<!-- #EndLibraryItem --><h1>Social Event</h1>

<h2>This is the sub event that will be triggered by any Social  API callbacks received.</h2>

<p>
This event can only be triggered by the various specific <a href="../../002_Reference/Steam%20API/index.html">Social Functions</a>  and will return a 
<a href="../../002_Reference/Data%20Structures/DS%20Maps/index.html"><tt>ds_map</tt></a> stored in the variable <tt>async_load</tt>, containing different key/value pairs depending on the callback 
from the function that has triggered the event. 
<br>
<br>

The ds_map will contain a number of keys, the most important of which is the "<i>id</i>" key. This will return a <b>constant</b> which can then be checked in code to determine which of the many 
callbacks the event has received. Once you have parsed this key and compared the value returned with the available constants, you can then continue to extract the rest of the information from the map.
<br>
<br>

The function pages on <a href="../../002_Reference/Social%20Gaming/Achievements%20and%20Leaderboards/index.html">Social Gaming - Achievements and Leaderboards</a> in the Reference section detail the functions 
and callbacks as well as the constants used to trigger this event, but there are also certain circumstances in which it will be triggered without a function call from the game that is running:
<blockquote>
<ul>
	<li>when your game is launched from the OS dashboard
	<li>when you complete a challenge
	<li>when another player completes a challenge
	<li>when the game is started from the OS dashboard by selecting a challenge
</ul>
</blockquote>


<p>
Any of the above callbacks will trigger the <b>Social Event</b> and an <tt>async_load</tt> map will be generated with the following details (note that there is a different "id" key value to define each of the 
different reasons that the event was called, but all other contents of the map are the same):
<blockquote>
	<ol>
		<li>"<b>id</b>" - The value of this key will depend on the type of callback triggering the event. it can be one of these constants:<br>
		<ul>
			<li><b><tt>achievement_challenge_received</tt></b> - A challenge has been received<br>
			<li><b><tt>achievement_challenge_completed</tt></b> - A challenge has been completed.<br>
			<li><b><tt>achievement_challenge_completed_by_remote</tt></b> - A challenge has been completed by the other player.<br>
			<li><b><tt>achievement_challenge_launched</tt></b> - The game was launched from the OS dashboard with the given challenge.<br>
		</ul>
		<li>"<b>playerid</b>" - The player id for the challenge.<br><br>
		<li>"<b>issuerid</b>" - The id of the person that issued the challenge.<br><br>
		<li>"<b>state</b>" - The state of the challenge, which will have a value of 0 - 3 (as a string) for <i>invalid</i>, <i>pending</i>, <i>completed</i> or <i>declined</i>.<br><br>
		<li>"<b>message</b>" - The text message for challenge.<br><br> 
		<li>"<b>issueddate</b>" - The issue date for challenge<br><br> 
		<li>"<b>completeddate</b>" - The completion date for challenge.<br><br> 
		<li>"<b>type</b>" - The type of challenge given. Can be one of two constants:<br>
		<ul>
			<li><b><tt>achievement_type_score_challenge</tt></b> - A challenge based on the score value.<br>
			<li><b><tt>achievement_type_achievement_challenge</tt></b> - A challenge based on an achievement.<br>
		</ul>
		<li>"<b>identifier</b>" - The identifying string for the challenge.<br><br> 
		<li>"<b>score</b>" - The score tied in with the challenge. 
	</ol>
</blockquote>	

<h3>Example :</h3>
<p class="code">
var ident = ds_map_find_value(async_load, "id" );<br>
if ident == achievement_challenge_completed;<br>
&nbsp;&nbsp;&nbsp;{<br>
&nbsp;&nbsp;&nbsp;player_id = ds_map_find_value(async_load, "playerid");<br>
&nbsp;&nbsp;&nbsp;issuer_id = ds_map_find_value(async_load, "issuerid"); <br>
&nbsp;&nbsp;&nbsp;state = ds_map_find_value(async_load, "state");<br>
&nbsp;&nbsp;&nbsp;date_completed = ds_map_find_value(async_load, "completeddate");<br>
&nbsp;&nbsp;&nbsp;date_issued = ds_map_find_value(async_load, "issueddate");<br>
&nbsp;&nbsp;&nbsp;ach_type = ds_map_find_value(async_load, "type");<br>
&nbsp;&nbsp;&nbsp;ach_ident = ds_map_find_value(async_load, "identifier");<br>
&nbsp;&nbsp;&nbsp;ach_score = ds_map_find_value(async_load, "score");<br>
&nbsp;&nbsp;&nbsp;}
<p>

<p>
<br>
</p>
<p>

<i><b>NOTE : </b>The variable <tt>async_load</tt> is only valid in the asynchronous events, as the <tt>ds_map</tt> that is points to is created at the start of the event, then deleted again at the end, 
with this variable being reset to a value of -1. However, all further data-structures created from the event <b>must be cleaned up using the appropriate functions</b>.</i>
<br>
<br>

<p>
<br>
</p>
<p>

<div class="clear">
	<div style="float:left">
		Back : <a href="index.html">More About Async Events</a>
	</div>
	<div style="float:right">
		Next : <a href="Image%20Loaded%20and%20Sound%20Loaded%20Events.html">Image Loaded and Sound Loaded Events</a>
	</div>
</div>
</p>

<h5>&copy; Copyright YoYo Games Ltd. 2013 All Rights Reserved</h5><!-- #BeginLibraryItem "/Library/mmenu_body_down.lbi" -->
</div>
<div id="footer">
				Fixed footer :-)
</div>

			<nav id="menu">
				<ul>
					<li ><a href="../../../index.html">GameMaker:Studio 手册首页</a>
						<ul>
							<li><a href="#content">Introduction</a></li>
							<li><a href="#first">First section</a></li>
							<li><a href="#second">Second section</a></li>
							<li><a href="#third">Third section</a></li>
						</ul>
					</li>
					<li >
						<a href="../../000_Using GameMaker/index.html">GameMaker:Studio 使用</a>
						<ul>
							<li><a href="#">First sub-item</a></li>
							<li>
								<a href="#">Second sub-item</a>
								<ul>
									<li><a href="#">First sub-sub-item</a></li>
									<li><a href="#">Second sub-sub-item</a></li>
									<li><a href="#">Third sub-sub-item</a></li>
								</ul>
							</li>
							<li><a href="#">Third sub-item</a></li>
						</ul>
					</li>
					<li ><a href="../index.html">Advanced Use 高级使用</a></li>
					<li ><a href="../../002_Reference/index.html">Reference GML参考手册</a></li>
					<li ><a href="#">Examples and Experience 实例教程及心得</a></li>
					<li ><a href="#">Experimental project 实验项目</a></li>
					<li ><a href="#">Setting 应用设置</a></li>					
				</ul>
			</nav>
</div>
<!-- 注意1 --><!-- #EndLibraryItem --></body>
</html>

<!-- KEYWORDS
Social Event
Google Game Services
Game Circle
Game Center
achievement_challenge_received
achievement_challenge_completed_by_remote
achievement_challenge_completed
achievement_challenge_launched
-->